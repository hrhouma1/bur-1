# <h1 id="tp-gestion-etudiants-pyqt6">TP ‚Äì Syst√®me de gestion d‚Äô√©tudiants avec interface graphique PyQt6</h1>


# R√©f√©rences:

Voici les liens de r√©f√©rence :

* [https://www.youtube.com/watch?v=2WuHs-5kMl0](https://www.youtube.com/watch?v=2WuHs-5kMl0)
* [https://github.com/CodeQuestions/PyQt5-Video-Book](https://github.com/CodeQuestions/PyQt5-Video-Book)
* [https://fonts.google.com/icons](https://fonts.google.com/icons)
* [Pyside6_Students_Information_Management_System](https://github.com/hrhouma1/Pyside6_Students_Information_Management_System)


## <h2 id="objectif">Objectif p√©dagogique</h2>

D√©velopper une application graphique en Python √† l‚Äôaide de **PyQt6**, permettant la gestion d‚Äôun carnet d‚Äô√©tudiants. L‚Äôapplication doit comporter une interface conviviale, permettre l‚Äôajout, la visualisation et la recherche d‚Äô√©tudiants, et utiliser un syst√®me de donn√©es persistantes (dictionnaire, fichier ou base de donn√©es).



## <h2 id="ressource-video">Ressource obligatoire</h2>

Vous devez vous baser sur la vid√©o suivante comme point de d√©part pour comprendre la structure d‚Äôun projet PyQt6 :

üîó **Vid√©o de r√©f√©rence** :
- *[https://www.youtube.com/watch?v=2WuHs-5kMl0](https://www.youtube.com/watch?v=2WuHs-5kMl0)* 
- *Titre : 017 PyQt6 Programs | Students Information Management System ‚Äì Full Tutorial*

> Il s‚Äôagit d‚Äôun tutoriel complet que vous devez √©tudier pour comprendre l‚Äôarchitecture d‚Äôun projet PyQt6 professionnel. Vous √™tes libres de le reproduire en partie, de l‚Äôadapter ou de vous en inspirer pour votre propre application.


## <h2 id="livrables">Livrables attendus</h2>

1. Une application fonctionnelle (.py) conforme aux exigences du sujet.
2. Un **d√©p√¥t Git contenant au moins 8 commits distincts et significatifs** (voir section ci-dessous).
3. Un fichier `README.md` expliquant le fonctionnement de votre application.
4. Un court fichier `rapport.txt` (ou `.pdf`) contenant :

   * un sch√©ma de l‚Äôinterface,
   * la structure de vos fichiers,
   * la description des principaux composants et classes utilis√©s.



## <h2 id="structure-commits">Structure des commits Git attendue</h2>

Vous devez faire des commits structur√©s √† chaque √©tape cl√© du d√©veloppement. Voici les **commits obligatoires minimaux** :

| Num√©ro | √âtape de d√©veloppement                  | Exemple de message de commit                     |
| ------ | --------------------------------------- | ------------------------------------------------ |
| 1      | Cr√©ation du projet                      | `Initialisation du projet PyQt6`                 |
| 2      | Ajout des d√©pendances                   | `Ajout des biblioth√®ques n√©cessaires`            |
| 3      | Cr√©ation de la fen√™tre principale       | `Cr√©ation de l'interface principale`             |
| 4      | Ajout de composants (formulaire, liste) | `Ajout du formulaire d'ajout d'√©tudiant`         |
| 5      | Connexion aux donn√©es                   | `Connexion √† la base SQLite` (ou autre)          |
| 6      | Fonctionnalit√© termin√©e                 | `Ajout d'un √©tudiant et affichage dans la liste` |
| 7      | Gestion des erreurs                     | `Ajout des messages d'erreur et validations`     |
| 8      | Finalisation                            | `Finalisation, nettoyage et documentation`       |


<br/>

# Annexe 2 - workflow de l'application Pyside6_Students_Information_Management_System

Ce projet est une **application de gestion d‚Äôinformations d‚Äô√©tudiants** avec une interface graphique d√©velopp√©e en **PySide6** (binding Python pour Qt6). Elle permet √† l‚Äôutilisateur de :

* Ajouter un nouvel √©tudiant
* Modifier ou supprimer les informations d‚Äôun √©tudiant existant
* Rechercher un √©tudiant √† partir de certains crit√®res
* Visualiser tous les √©tudiants enregistr√©s dans une base de donn√©es
* S√©lectionner un √©tudiant pour pr√©-remplir le formulaire



## Fichier principal : `main.py`

Lorsque le fichier `main.py` est ex√©cut√©, les √©tapes suivantes sont d√©clench√©es :

```python
if __name__ == "__main__":
    app = QApplication(sys.argv)
    window = MainWindow()
    window.show()
    sys.exit(app.exec())
```

1. `QApplication(sys.argv)` : instancie l'application Qt, n√©cessaire pour ex√©cuter toute interface graphique avec Qt.
2. `window = MainWindow()` : cr√©e la fen√™tre principale, d√©finie dans la classe `MainWindow`.
3. `window.show()` : rend visible la fen√™tre principale.
4. `app.exec()` : d√©marre la boucle principale de l'application, qui g√®re les √©v√©nements utilisateurs.



## Classe `MainWindow(QMainWindow)`

C'est la classe qui g√®re l'ensemble de l'interface utilisateur et les interactions. Sa m√©thode `__init__()` est le point d‚Äôentr√©e de la logique applicative.

### Structure de `__init__()` :

```python
def __init__(self):
    super().__init__()
    
    # Cr√©ation de l'interface utilisateur (issue du fichier .ui)
    self.ui = Ui_Form()
    self.ui.setupUi(self)

    # Instanciation de l'objet pour la gestion de la base de donn√©es
    self.db_manager = DatabaseManager()

    # Configuration initiale
    self.setup_ui()
    self.connect_signals()
    self.load_students()
```

1. `self.ui = Ui_Form()` : cr√©e une instance de l'interface utilisateur g√©n√©r√©e automatiquement √† partir de Qt Designer.
2. `self.ui.setupUi(self)` : applique cette interface √† la fen√™tre principale.
3. `self.db_manager = DatabaseManager()` : instancie le gestionnaire de base de donn√©es (non visible ici, probablement SQLite).
4. Appel √† trois m√©thodes internes pour finaliser l‚Äôinitialisation :

   * `setup_ui()` : configure certains composants suppl√©mentaires de l‚Äôinterface.
   * `connect_signals()` : relie les boutons et les champs √† des fonctions Python.
   * `load_students()` : charge les donn√©es initiales depuis la base et les affiche dans le tableau.



## M√©thodes appel√©es depuis `__init__()`

### 1. `setup_ui()`

* Charge les √©tats dans la liste d√©roulante (exemple : Qu√©bec, Alberta, etc.)
* Pr√©pare les param√®tres visuels ou initialise des valeurs par d√©faut

### 2. `connect_signals()`

* Relie les boutons de l‚Äôinterface graphique aux fonctions correspondantes :

  * `btnAdd.clicked.connect(self.add_student)`
  * `btnUpdate.clicked.connect(self.update_student)`
  * `btnDelete.clicked.connect(self.delete_student)`
  * `btnSearch.clicked.connect(self.search_students)`
  * `btnClear.clicked.connect(self.clear_fields)`
  * `btnSelect.clicked.connect(self.select_student)`
* Peut √©galement connecter la s√©lection dans le tableau √† `on_table_selection_changed`

### 3. `load_students()`

* Appelle la m√©thode `get_all_students()` du `DatabaseManager`
* Ensuite appelle `populate_table()` avec les donn√©es re√ßues
* Affiche les √©tudiants dans le tableau principal de l‚Äôinterface



## R√©sum√© des m√©thodes m√©tier (fonctions principales)

| M√©thode                        | Description                                                                     |
| ------------------------------ | ------------------------------------------------------------------------------- |
| `add_student()`                | Lit les donn√©es du formulaire, les valide, puis les ins√®re dans la base         |
| `update_student()`             | Met √† jour un enregistrement s√©lectionn√© dans la base                           |
| `delete_student()`             | Supprime l‚Äô√©tudiant s√©lectionn√© dans le tableau                                 |
| `search_students()`            | Ex√©cute une recherche en fonction des champs remplis                            |
| `select_student()`             | R√©cup√®re les donn√©es de la ligne s√©lectionn√©e et les affiche dans le formulaire |
| `clear_fields()`               | Vide tous les champs du formulaire                                              |
| `get_form_data()`              | Lit les donn√©es saisies dans le formulaire                                      |
| `validate_form_data(data)`     | V√©rifie que les champs requis sont correctement remplis                         |
| `populate_table(students)`     | Ins√®re les donn√©es dans le tableau de l‚Äôinterface                               |
| `on_table_selection_changed()` | R√©agit √† la s√©lection d‚Äôune ligne dans le tableau                               |



## Cycle typique : ajout d‚Äôun √©tudiant

1. L‚Äôutilisateur saisit les informations dans le formulaire.
2. Il clique sur le bouton **Add**.
3. Le bouton est reli√© √† `add_student()` via `connect_signals()`.
4. `add_student()` appelle :

   * `get_form_data()` pour r√©cup√©rer les champs
   * `validate_form_data()` pour les valider
   * `self.db_manager.insert_student(...)` pour les enregistrer
5. Une fois l‚Äôinsertion r√©ussie, `load_students()` est rappel√©e pour rafra√Æchir le tableau.



```
+------------------+
|   main.py        |
+------------------+
        |
        v
[QApplication(sys.argv)]
        |
        v
[window = MainWindow()]
        |
        v
+------------------------------+
| class MainWindow(QMainWindow)|
+------------------------------+
| __init__()                   |
|   ‚îú‚îÄ> self.ui = Ui_Form()    |
|   ‚îú‚îÄ> self.ui.setupUi(self)  |
|   ‚îú‚îÄ> self.db_manager =      |
|   |       DatabaseManager()  |
|   ‚îú‚îÄ> self.setup_ui()        |
|   ‚îú‚îÄ> self.connect_signals() |
|   ‚îî‚îÄ> self.load_students()   |
+------------------------------+
        |
        v
[load_students()]
        |
        v
[self.db_manager.get_all_students()]
        |
        v
[populate_table(students)]
        |
        v
[Affichage dans le tableau Qt]

```

### Actions utilisateur (boutons) ‚Äî Signal ‚Üí Slot

```
[UI: Bouton "Add"]
        |
        v
[add_student()]
        |
        ‚îú‚îÄ> get_form_data()
        ‚îú‚îÄ> validate_form_data(data)
        ‚îî‚îÄ> db_manager.add_student(...)
                   |
                   ‚îî‚îÄ> insert dans base de donn√©es
        |
        v
[load_students()] ‚Üí recharge le tableau

-----------------------------------------------------

[UI: Bouton "Search"]
        |
        v
[search_students()]
        |
        ‚îî‚îÄ> db_manager.search_students(...) 
                     |
                     ‚îî‚îÄ> SELECT dans DB
        |
        v
[populate_table(students)]

-----------------------------------------------------

[UI: S√©lection d'une ligne]
        |
        v
[on_table_selection_changed()]
        ‚îî‚îÄ> Remplit le formulaire avec les donn√©es s√©lectionn√©es

-----------------------------------------------------

[UI: Bouton "Delete"]
        |
        v
[delete_student()]
        ‚îî‚îÄ> db_manager.delete_student(id)
                     ‚îî‚îÄ> DELETE FROM DB
        |
        v
[load_students()]

-----------------------------------------------------

[UI: Bouton "Update"]
        |
        v
[update_student()]
        ‚îú‚îÄ> get_form_data()
        ‚îú‚îÄ> validate_form_data(data)
        ‚îî‚îÄ> db_manager.update_student(...)
        |
        v
[load_students()]
```

### DatabaseManager (connect\_database.py)

```
class DatabaseManager:
    __init__():
        ‚îú‚îÄ> self.create_tables()
    
    M√©thodes expos√©es √† MainWindow :
        ‚îú‚îÄ> add_student()
        ‚îú‚îÄ> get_all_students()
        ‚îú‚îÄ> get_student_by_id()
        ‚îú‚îÄ> update_student()
        ‚îú‚îÄ> delete_student()
        ‚îú‚îÄ> search_students()
        ‚îú‚îÄ> get_states()
        ‚îú‚îÄ> get_cities_by_state()
        ‚îú‚îÄ> get_student_count()
```







<br/>

# Annexe 3 - Qu‚Äôest-ce qu‚Äôun signal ?

Dans une interface graphique, un **signal** est un **√©v√©nement** d√©clench√© par l‚Äôutilisateur ou par le syst√®me.

Par exemple :

* Quand on **clique sur un bouton**, un signal est envoy√©.
* Quand on **s√©lectionne une ligne dans un tableau**, un signal est envoy√©.
* Quand on **change le texte dans un champ**, un signal est envoy√©.

> En r√©sum√© : **Un signal = une action qui se produit dans l'interface.**

Mais un signal **ne fait rien tout seul**. Il faut lui dire **quoi faire** quand il se d√©clenche. C‚Äôest l√† qu‚Äôon utilise une **fonction appel√©e "slot"** (ou juste une m√©thode en Python).



## Exemples dans ton projet

Prenons un bouton. Tu as dans ton interface un bouton **"Add"** (Ajouter).

Tu veux que **quand on clique dessus, √ßa appelle la fonction `add_student()`**.

Voici ce que tu √©cris dans `connect_signals()` :

```python
self.ui.btnAdd.clicked.connect(self.add_student)
```

D√©composition :

* `self.ui.btnAdd` : c‚Äôest ton bouton.
* `.clicked` : c‚Äôest le **signal** que le bouton envoie quand on clique dessus.
* `.connect(...)` : √ßa relie ce signal √† une **fonction √† appeler**.
* `self.add_student` : c‚Äôest la fonction que tu veux ex√©cuter.

---

## Autres exemples dans notre projet

```python
self.ui.btnUpdate.clicked.connect(self.update_student)
self.ui.btnDelete.clicked.connect(self.delete_student)
self.ui.btnSearch.clicked.connect(self.search_students)
self.ui.btnClear.clicked.connect(self.clear_fields)
```

√Ä chaque fois :

* Le bouton d√©clenche un signal quand on clique.
* Ce signal est **connect√©** √† une m√©thode qui va faire le travail.



## Pourquoi c‚Äôest important ?

C‚Äôest ce qui permet √† notre interface de **r√©agir aux actions de l‚Äôutilisateur**.

Sans cette connexion entre signal et fonction, **cliquer sur un bouton ne ferait rien**.


## Analogie simple

Imaginez un **interrupteur de lumi√®re** :

* L'interrupteur = le bouton (dans l'interface)
* Appuyer dessus = le signal (ex: `clicked`)
* La lampe qui s‚Äôallume = la fonction qu‚Äôon appelle (`add_student()` par exemple)

Nous devons **relier le fil entre l‚Äôinterrupteur et la lampe**. C‚Äôest ce que fait `.connect()`.

---

## R√©capitulatif

| Terme        | D√©finition simplifi√©e                              |
| ------------ | -------------------------------------------------- |
| Signal       | Quelque chose qui **se passe** (clic, texte, etc.) |
| Slot         | Une fonction qu‚Äôon veut **ex√©cuter** en r√©ponse    |
| `.connect()` | Lien entre le signal et la fonction                |




<br/>

# Annexe 4 -Tous sur la base de donn√©es


### 4.1. Tableau des m√©thodes de `DatabaseManager`

| M√©thode                 | Description                                                               | Arguments                                                         | Retour                    |
| ----------------------- | ------------------------------------------------------------------------- | ----------------------------------------------------------------- | ------------------------- |
| `__init__()`            | Initialise la configuration de la base et cr√©e la table si n√©cessaire.    | `host`, `user`, `password`, `database`                            | Aucun                     |
| `get_connection()`      | √âtablit et retourne une connexion MySQL.                                  | Aucun                                                             | Connexion MySQL ou `None` |
| `create_tables()`       | Supprime et recr√©e la table `students_info` avec le sch√©ma d√©fini.        | Aucun                                                             | Aucun                     |
| `add_student()`         | Ins√®re un nouvel √©tudiant dans la base.                                   | `first_name`, `last_name`, `city`, `state`, `email`               | `bool` (succ√®s ou √©chec)  |
| `get_all_students()`    | R√©cup√®re tous les √©tudiants tri√©s par ID.                                 | Aucun                                                             | `List[Tuple]`             |
| `get_student_by_id()`   | R√©cup√®re un √©tudiant sp√©cifique par ID.                                   | `student_id`                                                      | `Tuple` ou `None`         |
| `update_student()`      | Met √† jour les informations d‚Äôun √©tudiant existant.                       | `student_id`, `first_name`, `last_name`, `city`, `state`, `email` | `bool`                    |
| `delete_student()`      | Supprime un √©tudiant sp√©cifique par son ID.                               | `student_id`                                                      | `bool`                    |
| `search_students()`     | Effectue une recherche selon un mot-cl√© dans un champ sp√©cifique ou tous. | `search_term`, `search_field` (par d√©faut `"all"`)                | `List[Tuple]`             |
| `get_states()`          | R√©cup√®re toutes les provinces (√©tats) uniques.                            | Aucun                                                             | `List[str]`               |
| `get_cities_by_state()` | R√©cup√®re toutes les villes associ√©es √† une province.                      | `state`                                                           | `List[str]`               |
| `clear_all_students()`  | Supprime tous les √©tudiants de la base.                                   | Aucun                                                             | `bool`                    |
| `get_student_count()`   | Retourne le nombre total d'√©tudiants.                                     | Aucun                                                             | `int`                     |

---

### Remarques techniques

* Toutes les m√©thodes ouvrent une connexion via `get_connection()`, effectuent leur op√©ration, puis ferment la connexion proprement.
* Les exceptions sont g√©r√©es avec `try/except` pour √©viter les plantages et afficher les erreurs MySQL.
* Les op√©rations de lecture renvoient des listes ou tuples selon le r√©sultat (`fetchone`, `fetchall`), alors que les op√©rations d‚Äô√©criture renvoient un bool√©en de succ√®s.




### 4.2. Tableau r√©capitulatif des m√©thodes de `MainWindow`

| M√©thode                        | Description                                                           | Appelle la DB ?             | Composants UI impliqu√©s                            |
| ------------------------------ | --------------------------------------------------------------------- | --------------------------- | -------------------------------------------------- |
| `__init__()`                   | Initialise l'UI, la base de donn√©es, et configure les signaux.        | Oui (via `DatabaseManager`) | `setupUi`, `tableWidget`, boutons, comboBox        |
| `setup_ui()`                   | Configure le tableau et charge les provinces.                         | Oui (`get_states`)          | `tableWidget`, `comboBox`, `comboBox_2`            |
| `connect_signals()`            | Connecte les boutons aux m√©thodes de gestion.                         | Non                         | Signaux Qt (`clicked`, `textChanged`, etc.)        |
| `load_states()`                | Charge les provinces depuis la base ou ajoute des valeurs par d√©faut. | Oui (`get_states`)          | `comboBox`                                         |
| `on_state_changed(state)`      | Charge les villes selon la province s√©lectionn√©e.                     | Oui (`get_cities_by_state`) | `comboBox_2`                                       |
| `load_students()`              | Charge tous les √©tudiants depuis la base.                             | Oui (`get_all_students`)    | `tableWidget`                                      |
| `populate_table(students)`     | Affiche les √©tudiants dans le tableau.                                | Non                         | `tableWidget`                                      |
| `get_form_data()`              | R√©cup√®re les donn√©es du formulaire.                                   | Non                         | `lineEdit_2`, `lineEdit_3`, `lineEdit_6`, comboBox |
| `validate_form_data(data)`     | V√©rifie les champs et valide la syntaxe de l‚Äôemail.                   | Non                         | `QMessageBox`                                      |
| `add_student()`                | Ajoute un √©tudiant apr√®s validation.                                  | Oui (`add_student`)         | `lineEdit`, `tableWidget`, `QMessageBox`           |
| `update_student()`             | Met √† jour les donn√©es de l‚Äô√©tudiant s√©lectionn√©.                     | Oui (`update_student`)      | `tableWidget`, `QMessageBox`                       |
| `select_student()`             | Remplit le formulaire avec les donn√©es de la ligne s√©lectionn√©e.      | Non                         | `lineEdit`, `comboBox`, `tableWidget`              |
| `search_students()`            | Recherche des √©tudiants avec un mot-cl√©.                              | Oui (`search_students`)     | `lineEdit_7`, `tableWidget`, `QMessageBox`         |
| `clear_fields()`               | Vide tous les champs du formulaire.                                   | Non                         | `lineEdit`, `comboBox`, `comboBox_2`               |
| `delete_student()`             | Supprime l‚Äô√©tudiant s√©lectionn√© apr√®s confirmation.                   | Oui (`delete_student`)      | `QMessageBox`, `tableWidget`, `lineEdit`           |
| `on_table_selection_changed()` | G√®re les √©v√©nements de s√©lection dans le tableau (non impl√©ment√©).    | Non                         | `tableWidget`                                      |



### R√®gles de fonctionnement

* **La base de donn√©es** est toujours appel√©e via `self.db_manager` (instance de `DatabaseManager`).
* **Les composants UI** viennent de `self.ui`, g√©n√©r√©s automatiquement via `main_ui.py`.
* **Le tableau** `tableWidget` est au centre de l‚Äôinterface, il est manipul√© par : `populate_table`, `select_student`, `delete_student`, etc.
* **Les champs de saisie** sont `lineEdit_2`, `lineEdit_3`, `lineEdit_6` pour les donn√©es, et `lineEdit_7` pour la recherche.






### 4.3. Appels √† la base de donn√©es depuis `MainWindow`

| M√©thode dans `MainWindow` | Ligne concern√©e                              | M√©thode de `DatabaseManager` appel√©e                     | Fonction de la DB concern√©e     |
| ------------------------- | -------------------------------------------- | -------------------------------------------------------- | ------------------------------- |
| `__init__()`              | `self.load_students()`                       | `get_all_students()`                                     | R√©cup√®re tous les √©tudiants     |
| `setup_ui()`              | `self.load_states()`                         | `get_states()`                                           | R√©cup√®re la liste des provinces |
| `load_states()`           | `self.db_manager.get_states()`               | `get_states()`                                           | Liste des provinces uniques     |
| `on_state_changed()`      | `self.db_manager.get_cities_by_state(state)` | `get_cities_by_state(state)`                             | Villes associ√©es √† une province |
| `load_students()`         | `self.db_manager.get_all_students()`         | `get_all_students()`                                     | Liste compl√®te des √©tudiants    |
| `add_student()`           | `self.db_manager.add_student(...)`           | `add_student(first_name, last_name, city, state, email)` | Insertion d'un nouvel √©tudiant  |
| `update_student()`        | `self.db_manager.update_student(...)`        | `update_student(id, ...)`                                | Mise √† jour d‚Äôun √©tudiant       |
| `delete_student()`        | `self.db_manager.delete_student(id)`         | `delete_student(id)`                                     | Suppression d‚Äôun √©tudiant       |
| `search_students()`       | `self.db_manager.search_students(term)`      | `search_students(term)`                                  | Rechercher dans tous les champs |

---

### R√©sum√© visuel simplifi√©

```
MainWindow
   ‚îú‚îÄ‚îÄ setup_ui()
   ‚îÇ     ‚îî‚îÄ‚îÄ load_states() ‚îÄ‚îÄ> get_states()
   ‚îú‚îÄ‚îÄ on_state_changed() ‚îÄ‚îÄ> get_cities_by_state(state)
   ‚îú‚îÄ‚îÄ load_students() ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> get_all_students()
   ‚îú‚îÄ‚îÄ add_student() ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> add_student(...)
   ‚îú‚îÄ‚îÄ update_student() ‚îÄ‚îÄ‚îÄ‚îÄ> update_student(...)
   ‚îú‚îÄ‚îÄ delete_student() ‚îÄ‚îÄ‚îÄ‚îÄ> delete_student(id)
   ‚îî‚îÄ‚îÄ search_students() ‚îÄ‚îÄ‚îÄ> search_students(term)
```






### 4.4. Requ√™tes SQL par m√©thode (`DatabaseManager`)

| M√©thode                      | Requ√™te SQL ex√©cut√©e                                                                          | Description de l'op√©ration                   |
| ---------------------------- | --------------------------------------------------------------------------------------------- | -------------------------------------------- |
| `create_tables()`            | `DROP TABLE IF EXISTS students_info`                                                          | Supprime la table existante (si elle existe) |
|                              | `CREATE TABLE students_info (...)`                                                            | Cr√©e la table avec le sch√©ma complet         |
| `add_student(...)`           | `INSERT INTO students_info (...) VALUES (%s, %s, %s, %s, %s)`                                 | Ins√®re un √©tudiant                           |
| `get_all_students()`         | `SELECT * FROM students_info ORDER BY studentId`                                              | R√©cup√®re tous les √©tudiants                  |
| `get_student_by_id(id)`      | `SELECT * FROM students_info WHERE studentId = %s`                                            | R√©cup√®re un √©tudiant par ID                  |
| `update_student(...)`        | `UPDATE students_info SET ... WHERE studentId = %s`                                           | Met √† jour un √©tudiant                       |
| `delete_student(id)`         | `DELETE FROM students_info WHERE studentId = %s`                                              | Supprime un √©tudiant                         |
| `search_students(term)`      | `SELECT * FROM students_info WHERE ... LIKE %s` (selon le champ)                              | Recherche textuelle dans plusieurs colonnes  |
| `get_states()`               | `SELECT DISTINCT state FROM students_info WHERE state IS NOT NULL ORDER BY state`             | Liste des provinces uniques                  |
| `get_cities_by_state(state)` | `SELECT DISTINCT city FROM students_info WHERE state = %s AND city IS NOT NULL ORDER BY city` | Villes pour une province                     |
| `clear_all_students()`       | `DELETE FROM students_info`                                                                   | Supprime tous les √©tudiants                  |
| `get_student_count()`        | `SELECT COUNT(*) FROM students_info`                                                          | Retourne le nombre total d'√©tudiants         |



### 4.5. Exemple SQL pour la cr√©ation de la table

```sql
CREATE TABLE students_info (
    studentId INT NOT NULL AUTO_INCREMENT,
    firstName VARCHAR(45) NOT NULL,
    lastName VARCHAR(45),
    state VARCHAR(45),
    city VARCHAR(45),
    emailAddress VARCHAR(45),
    PRIMARY KEY (studentId),
    UNIQUE INDEX studentId_UNIQUE (studentId ASC) VISIBLE
);
```



### 4.6. R√©sum√© des op√©rations sur la base

| Type d‚Äôop√©ration | M√©thodes concern√©es                                                                                                  |
| ---------------- | -------------------------------------------------------------------------------------------------------------------- |
| **SELECT**       | `get_all_students`, `get_student_by_id`, `get_states`, `get_cities_by_state`, `search_students`, `get_student_count` |
| **INSERT**       | `add_student`                                                                                                        |
| **UPDATE**       | `update_student`                                                                                                     |
| **DELETE**       | `delete_student`, `clear_all_students`                                                                               |
| **DDL**          | `create_tables` (DROP + CREATE TABLE)                                                                                |




### Question et r√©ponse: Est-ce que la connexion √† la base de donn√©esest ouverte dans __init__ ?

### R√©ponse :

**Non**, la connexion √† la base de donn√©es n‚Äôest **pas ouverte une seule fois dans `__init__`**.



### D√©tail technique :

```python
def __init__(self, host: str = "localhost", user: str = "root", password: str = "root", database: str = "db_students"):
    self.host = host
    self.user = user
    self.password = password
    self.database = database
    self.create_tables()
```

Dans `__init__`, on **stocke les param√®tres de connexion** (`host`, `user`, `password`, `database`), et on appelle `create_tables()` **une seule fois** au d√©marrage.

Mais on **n‚Äôouvre pas de connexion persistante ici**.

---

### O√π la connexion est-elle r√©ellement ouverte ?

Chaque m√©thode comme `add_student()`, `get_all_students()`, etc., **appelle cette m√©thode** :

```python
def get_connection(self):
    return mysql.connector.connect(...)
```

Donc **√† chaque appel de la base**, la connexion est **ouverte**, utilis√©e, puis **ferm√©e** dans un `finally` comme ici :

```python
finally:
    if conn.is_connected():
        cursor.close()
        conn.close()
```



### Avantages de ce mod√®le (connexion √† chaque op√©ration) :

* **Fiable** : √©vite de garder une connexion ouverte trop longtemps.
* **Plus s√ªr** : si une connexion est perdue, elle sera recr√©√©e √† la prochaine requ√™te.
* **Simple √† d√©boguer** : chaque m√©thode est ind√©pendante.

---

### Inconv√©nients :

* **Moins performant** si tu fais beaucoup d‚Äôop√©rations tr√®s rapides √† la suite.
* N√©cessite un **temps de connexion MySQL** √† chaque fois.

---

### Alternative avanc√©e (non utilis√©e ici) :

* Ouvrir une connexion dans `__init__` et la **r√©utiliser** dans toutes les m√©thodes.
* N√©cessite une logique robuste de gestion de connexions (reconnexion, timeout, etc.).



### Conclusion :

> **Oui**, la configuration est faite une seule fois dans `__init__`,
> mais **la connexion r√©elle √† MySQL est recr√©√©e dans chaque m√©thode**,
> via `get_connection()`.



# R√©f√©rences:

Voici les liens de r√©f√©rence :

* [https://www.youtube.com/watch?v=2WuHs-5kMl0](https://www.youtube.com/watch?v=2WuHs-5kMl0)
* [https://github.com/CodeQuestions/PyQt5-Video-Book](https://github.com/CodeQuestions/PyQt5-Video-Book)
* [https://fonts.google.com/icons](https://fonts.google.com/icons)



